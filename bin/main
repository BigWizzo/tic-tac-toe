#!/usr/bin/env ruby

# rubocop:disable Lint/AssignmentInCondition

# Importing the module Enumerable
# module Enumerable
  require_relative '../lib/player.rb'

  the_board = Board.new
  board = the_board.board
  x_count = the_board.x_count
  o_count = the_board.o_count
  winning_points = the_board.winning_points

  player_first = Player.new("Player 1", "X")
  player_second = Player.new("Player 2", "O")
  player_one = player_first.player
  player_two = player_second.player
  chip_one = player_first.chip
  chip_two = player_second.chip
  prompt_one = player_first.prompt
  prompt_two = player_second.prompt
  move_one = player_first.the_move
  move_two = player_second.the_move
  # board_pos_one = player_first.board_pos(move_one)
  # board_pos_two = player_second.board_pos(move_two)
  prompt_place_chip_one = player_first.prompt_place_chip(prompt_one, player_one)
  prompt_place_chip_two = player_second.prompt_place_chip(prompt_two, player_two)
  # range = player_first.prompt_place_chip(prompt_one, player_one)


  puts "#{player_one}, What's your name?"
  player_one = gets.chomp.capitalize!

  puts "#{player_two}, What's your name?"
  player_two = gets.chomp.capitalize!

  puts 'Welcome to the Tic Tac Toe Game'
  puts 'Please read the Game instructions below.'
  puts '1. The board presented to you has 9 squares numbered from 1 - 9'
  puts '2. To win the game, You need to get 3 chips in a straight line. (Horizontal, Vertical, or Diagonal)'
  puts '3. Try to avoid your opponent from winning by strategically placing your chips'
  puts '4. If no player makes a straight line of 3 chips, the game is a draw'
  # chip_one = 'x'.upcase
  # chip_two = 'o'.upcase
  puts "#{player_one} you play first your chip is #{chip_one}"
  puts "#{player_two} you play second your chip is #{chip_two}\n\n"
  puts "-----------LET'S BE PLAYING-------------"

  # x_count = []
  # o_count = []

  # def range(the_move)
    # range = (1..9).include? the_move
    # range
  # end

  turn = 1
  while turn < 6
    # prompt_one = "#{player_one} Place Your Chip on the board."
    # puts prompt_one
    # prompt_place_chip_one = player_first.prompt_place_chip(prompt_one, player_one)
    prompt_place_chip_one

    # def hhhh
      while move_one = gets.chomp.to_i
        range = (1..9).include? move_one
        if range == true && board[move_one - 1].is_a?(Integer)
          board[move_one - 1] = chip_one
          x_count.push(move_one - 1)
          puts the_board.display_bd
          break
        else
          puts 'Your input is invalid. Put an available number between 1 - 9 on unoccupied spot'
          puts prompt_one
        end
      end
    # end

    # def win_check(winning_points, x_count)
      k = 0
      while k < winning_points.length
        if (x_count & winning_points[k]).length == 3
          win_one = true
          break
        end
        k += 1
      end
    # end

    # win_check(winning_points, x_count)
    
    # def say(words)
      # puts words4
    # end
    # 
    # say("hello")

    if win_one
      puts "#{player_one} You have won the game!!!"
      break
    elsif board.all?(String)
      puts 'This is a DRAW'
      break
    end

    # prompt_two = "#{player_two} Place Your Chip on the board."
    # puts prompt_two
    prompt_place_chip_two

    while move_two = gets.chomp.to_i
      range = (1..9).include? move_two
      if range == true && board[move_two - 1].is_a?(Integer)
        board[move_two - 1] = chip_two
        o_count.push(move_two - 1)
        puts the_board.display_bd
        break
      else
        puts 'Your input is invalid. Put an available number between 1 - 9'
        puts prompt_two
      end
    end

    g = 0
    while g < winning_points.length
      if (o_count & winning_points[g]).length == 3
        win_two = true
        break
      end
      g += 1
    end
    if win_two
      puts "Congrats #{player_two} You have won the game!!!"
      break
    elsif board.all?(String) && !win_two
      puts 'This is a DRAW'
      break
    end

    turn += 1
  end
# end

# rubocop:enable Lint/AssignmentInCondition
