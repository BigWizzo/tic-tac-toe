#!/usr/bin/env ruby

# rubocop:disable Lint/AssignmentInCondition
module Enumerable

  require_relative '../lib/player.rb'
  require_relative '../lib/board.rb'
  
  the_board = Board.new
  board = the_board.board
  a = the_board.a
  b = the_board.b
  c = the_board.c
  d = the_board.d
  e = the_board.e
  f = the_board.f
  g = the_board.g
  h = the_board.h
  
  player_one = Player.new
  player_two = Player.new
  move_one = player_one.player_move
  move_two = player_two.player_move
  win_one = player_one.win
  win_two = player_two.win
  
  puts "Player 1, What's your name?"
  player_one = gets.chomp.capitalize!
  
  puts "Player 2, What's your name?"
  player_two = gets.chomp.capitalize!
  
  puts 'Welcome to the Tic Tac Toe Game'
  puts 'Please read the Game instructions below.'
  puts '1. The board presented to you has 9 squares numbered from 1 - 9'
  puts '2. To win the game, You need to get 3 chips in a straight line. (Horizontal, Vertical, or Diagonal)'
  puts '3. Try to avoid your opponent from winning by strategically placing your chips'
  puts '4. If no player makes a straight line of 3 chips, the game is a draw'
  chip_one = 'x'.upcase
  chip_two = 'o'.upcase
  puts "#{player_one} you play first your chip is #{chip_one}"
  puts "#{player_two} you play second your chip is #{chip_two}\n\n"
  puts "-----------LET'S BE PLAYING-------------"
  
  x_count = []
  o_count = [3, 7, 4, 5]
  # count_two = o_count & (d)
  
  k = 0
  while k < winning_points do
    p winning_points[k]
    k += 1
  end

  # y_count = o_count & count_two

  if count_two.length >= 3 && y_count.length == 3
    win_two = true
    elsif
    win_two = false
  end
  
  turn = 1
  while turn < 6
    prompt_one = "#{player_one} Place Your Chip on the board."
    puts prompt_one
    while move_one = gets.chomp.to_i
      range_one = (1..9).include? move_one
      if range_one == true && board[move_one - 1].is_a?(Integer)
        board[move_one - 1] = "X"
        x_count.push(move_one - 1)
        puts the_board.display_bd
        break
      else
        puts 'Your input is invalid. Put a number between 1 - 9 on unoccupied spot'
        puts prompt_one
      end
    end
  
    p x_count  
    win_one = (x_count & (a || b || c || d || e || f || g || h)).any?
    p win_one
    if x_count.length >= 3 && win_one
      puts "#{player_one} You have won!!!"
      break
    elsif board.all?(String)
      puts 'This is a DRAW'
      break
    end
  
    prompt_two = "#{player_two} Place Your Chip on the board."
    puts prompt_two
    while move_two = gets.chomp.to_i
      range_two = (1..9).include? move_two
      if range_two == true && board[move_two - 1].is_a?(Integer)
        board[move_two - 1] = 'O'
        o_count.push(move_two - 1)
        puts the_board.display_bd
        break
      else
        puts 'Your input is invalid. Put a number between 1 - 9'
        puts prompt_two
      end
    end
  
    p o_count
    win_two = (o_count & (a || b || c || d || e || f || g || h)).any?
    p win_two 
    if o_count.length >= 3 && win_two
      puts "Congrats #{player_two} You have won!!!"
      break
    elsif board.all?(String) && !win_two
      puts 'This is a DRAW'
      break
    end
  
    turn += 1
  end
end

# rubocop:enable Lint/AssignmentInCondition
