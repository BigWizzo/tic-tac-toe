#!/usr/bin/env ruby
# rubocop:disable Lint/AssignmentInCondition

require_relative '../lib/player.rb'
require_relative '../lib/board.rb'

# Instiantiate the board
the_board = Board.new
board = the_board.board
winning_points = the_board.winning_points

# Instantiate the Players
player_first = Player.new
player_second = Player.new
player_one = player_first.player
player_two = player_second.player
move_one = player_first.player_move
move_two = player_second.player_move
win_one = player_first.win
win_two = player_second.win

puts "Player 1, What's your name?"
player_one = gets.chomp.capitalize!

puts "Player 2, What's your name?"
player_two = gets.chomp.capitalize!

puts 'Welcome to the Tic Tac Toe Game'
puts 'Please read the Game instructions below.'
puts '1. The board presented to you has 9 squares numbered from 1 - 9'
puts '2. To win the game, You need to get 3 chips in a straight line. (Horizontal, Vertical, or Diagonal)'
puts '3. Try to avoid your opponent from winning by strategically placing your chips'
puts '4. If no player makes a straight line of 3 chips, the game is a draw'
chip_one = 'x'.upcase
chip_two = 'o'.upcase
puts "#{player_one} you play first your chip is #{chip_one}"
puts "#{player_two} you play second your chip is #{chip_two}\n\n"
puts "-----------LET'S BE PLAYING-------------"

x_count = []
o_count = []
turn = 1
while turn < 4
  prompt_one = "#{player_one} Place Your Chip on the board."
  puts prompt_one
  while move_one = gets.chomp.to_i # loop while getting user input
    range_one = (1..9).include? move_one
    if range_one == true
      board[move_one - 1] = 'X'
      x_count.push(move_one - 1)
      puts the_board.display_bd
      break # make sure to break so you don't ask again
    else
      puts 'Your input is invalid. Put a number between 1 - 9'
      puts prompt_one # print the prompt, so the user knows to re-enter input
    end
  end

  prompt_two = "#{player_two} Place Your Chip on the board."
  puts prompt_two
  while move_two = gets.chomp.to_i # loop while getting user input
    range_two = (1..9).include? move_two
    if range_two == true
      board[move_two - 1] = 'O'
      o_count.push(move_two - 1)
      puts the_board.display_bd
      break # make sure to break so you don't ask again
    else
      puts 'Your input is invalid. Put a number between 1 - 9'
      puts prompt_two # print the prompt, so the user knows to re-enter input
    end
  end

  turn += 1

  win_one = winning_points.any?(x_count)
  win_two = winning_points.any?(o_count)

  if x_count.length == 3 && win_one
    puts "Congrats #{player_one} You have won!!!"
  elsif o_count.length == 3 && win_two
    puts "Congrats #{player_two} You have won!!!"
  elsif x_count.length == 3 && o_count.length == 3 && !win_one && !win_two
    puts 'This is a DRAW'
  end
end

# rubocop:disable Lint/AssignmentInCondition
