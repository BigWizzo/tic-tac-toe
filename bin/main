#!/usr/bin/env ruby

# rubocop:disable Lint/AssignmentInCondition

# Importing the module Enumerable
# module Enumerable
  require_relative '../lib/board.rb'
  require_relative '../lib/player.rb'

  the_board = Board.new
  board = the_board.board
  x_count = the_board.x_count
  o_count = the_board.o_count
  move_one = the_board.the_move
  move_two = the_board.the_move
  arr_one = the_board.arr
  arr_two = the_board.arr
  re_prompt_one = the_board.re_prompt
  re_prompt_two = the_board.re_prompt
  picked_spot = the_board.picked_spot
  invalid = the_board.invalid
  re_chip_one = the_board.re_chip
  re_chip_two = the_board.re_chip
  win_one = the_board.win
  win_two = the_board.win
  winning_points = the_board.winning_points

  player_first = Player.new("Player 1", "X")
  player_second = Player.new("Player 2", "O")
  player_one = player_first.player
  player_two = player_second.player
  chip_one = player_first.chip
  chip_two = player_second.chip
  prompt_one = player_first.prompt
  prompt_two = player_second.prompt
  prompt_place_chip_one = player_first.prompt_place_chip(prompt_one, player_one)
  prompt_place_chip_two = player_second.prompt_place_chip(prompt_two, player_two)

  puts "#{player_one}, What's your name?"
  player_one = gets.chomp.capitalize!

  puts "#{player_two}, What's your name?"
  player_two = gets.chomp.capitalize!

  puts 'Welcome to the Tic Tac Toe Game'
  puts 'Please read the Game instructions below.'
  puts '1. The board presented to you has 9 squares numbered from 1 - 9'
  puts '2. To win the game, You need to get 3 chips in a straight line. (Horizontal, Vertical, or Diagonal)'
  puts '3. Try to avoid your opponent from winning by strategically placing your chips'
  puts '4. If no player makes a straight line of 3 chips, the game is a draw'
  puts "#{player_one} you play first your chip is #{chip_one}"
  puts "#{player_two} you play second your chip is #{chip_two}\n\n"
  puts "-----------LET'S BE PLAYING-------------"

  turn = 1
  while turn < 6
    picked_spot = 'The spot you picked is already taken, try again'
    invalid = 'Your input is invalid. Put an available number between 1 - 9'
    puts prompt_place_chip_one
    the_board.get_input(move_one, x_count, chip_one, prompt_one, picked_spot, invalid)

    if the_board.check_win(win_one, x_count)
      puts "#{player_one} You have won the game!!!"
      break
    elsif board.all?(String)
      puts 'This is a DRAW'
      break
    end

    puts prompt_place_chip_two
    the_board.get_input(move_two, o_count, chip_two, prompt_two, picked_spot, invalid)

    if the_board.check_win(win_two, o_count)
      puts "Congrats #{player_two} You have won the game!!!"
      break
    elsif board.all?(String) && !win_two
      puts 'This is a DRAW'
      break
    end

    turn += 1
  end
# end

# rubocop:enable Lint/AssignmentInCondition
